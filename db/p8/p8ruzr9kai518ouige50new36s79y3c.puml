{
  "sha1": "p8ruzr9kai518ouige50new36s79y3c",
  "insertion": {
    "when": "2025-11-24T19:24:25.501Z",
    "url": "https://github.com/plantuml/plantuml/issues/2418",
    "user": "plantuml@gmail.com"
  }
}
@startuml
scale 1800 width
[*] --> Device_0_Function_2
Device_0_Function_2: 0x10h MemoryBar
Device_0_Function_2 --> SharedMemory
state PowerBase {
state Telemetry_Data_PowerBase {
Status_A: STATUS_<IP> [31:0]
Status_B: STATUS_<IP>[31:0]
}
}
state SharedMemory {
HEADER: 0x00h FW_VERSION_0
HEADER: 0x04h FW_VERSION_1
HEADER: 0x08h FW_VERSION_2
HEADER: 0x0Ch FW_VERSION_3
HEADER: 0x10h
HEADER: 0x14h PowerBase
HEADER: 0x18h PowerBase_HIGH
HEADER: 0x1Ch 0x200h (Config Pointer)
HEADER: ...
HEADER: 0x70h 0xABCDh(System Memory DEVID)
HEADER: ...
HEADER: 0x200h Config1
HEADER: 0x220h Config2
state Virtual_Config {
Config1: CAP ID = 0x30
Config1: CAP VER = 1
Config1: NEXT CAP OFFSET = 0x220h
Config1: Vendor_ID = 0x1234
Config1: Config_VER = 1
Config2: Config_LEN = 0x10
Config2: Config_ID = 0x2
Config2: NumEntries = 0x2
Config2: EntrySize = 0x4
Config2: BAR_INDEX = 0
Config1: OFFSET = 0x4000h
Config1 --> Config2
Config2: CAP ID = 0x30
Config2: CAP VER = 1
Config2: NEXT CAP OFFSET = 0x000h
Config2: Vendor_ID = 0x1234
Config2: Config_VER = 1
Config2: Config_LEN = 0x10
Config2: Config_ID = 0x2
Config2: NumEntries = 0x8
Config2: EntrySize = 0x4
Config2: tBIR = 0
Config2: OFFSET = 0x4100h
}
state Data_Space {
state Data_Discovery_Table_Memory{
Entry0: ACCESS_TYPE = 0x2
Entry0: Entry_TYPE = 0x0
Entry0: SIZE (in Dwords) = 0x20h
Entry0: UNIQUE_ID = 0x11111111h
Entry0: BAR_INDEX = 0
Entry0: BASE_OFFSET = 0x00h
Entry0: Entry_Definition = RESERVED
Entry1: ACCESS_TYPE = 0x2
Entry1: Entry_TYPE = 0x0
Entry1: SIZE (in Dwords) = 0x60h
Entry1: UNIQUE_ID = 0x22222222h
Entry1: BAR_INDEX = 0
Entry1: BASE_OFFSET = 0x1000h
Entry1: Entry_Definition = RESERVED
}
state Data_Discovery_Table_PowerBase{
Entry10: ACCESS_TYPE = 0x2
Entry10: Entry_TYPE = 0x0
Entry10: SIZE (in Dwords) = 0x30h
Entry10: UNIQUE_ID = 0xBBBBBBBBh
Entry10: BAR_INDEX = 1
Entry10: BASE_OFFSET = 0x4000h
Entry10: Entry_Definition = RESERVED
Entry11: ACCESS_TYPE = 0x2
Entry11: Entry_TYPE = 0x0
Entry11: SIZE (in Dwords) = 0x10h
Entry11: UNIQUE_ID = 0xCCCCCCCCh
Entry11: BAR_INDEX = 1
Entry11: BASE_OFFSET = 0x5000h
Entry11: Entry_Definition = RESERVED
}
state LPM_Data_Region {
Power_Mgmt_A: BLK/BRK_TO_BDF MAPPING TABLE
Power_Mgmt_A: BLK/BRK_POWER_REQ MAPPING TABLE
}
state FW_Version_Region {
FW_VERSION: FW_VERSION_0
FW_VERSION: FW_VERSION_1
FW_VERSION: FW_VERSION_2
FW_VERSION: FW_VERSION_3
FW_VERSION: RSVD
FW_VERSION: PowerBase
FW_VERSION: PowerBase_HIGH
FW_VERSION: LPM_Data_OFFSET
FW_VERSION: OEM_SOC_DATA_PACKAGE_VERSION_0
FW_VERSION: OEM_SOC_DATA_PACKAGE_VERSION_1
FW_VERSION: OEM_SOC_DATA_PACKAGE_VERSION_2
FW_VERSION: OEM_CHIPSETINIT_VERSION_0
FW_VERSION: OEM_CHIPSETINIT_VERSION_1
FW_VERSION: OEM_CHIPSETINIT_VERSION_2
FW_VERSION: VENDOR_SOC_DATA_PACKAGE_VERSION_0
FW_VERSION: VENDOR_SOC_DATA_PACKAGE_VERSION_1
FW_VERSION: VENDOR_SOC_DATA_PACKAGE_VERSION_2
FW_VERSION: VENDOR_CHIPSETINIT_VERSION_0
FW_VERSION: VENDOR_CHIPSETINIT_VERSION_1
FW_VERSION: VENDOR_CHIPSETINIT_VERSION_2
FW_VERSION: RSVD
FW_VERSION: RSVD
FW_VERSION: RSVD
FW_VERSION: RSVD
FW_VERSION: System_SharedMemory_Bar
FW_VERSION: System_SharedMemory_Bar_HIGH
FW_VERSION: RSVD
FW_VERSION: RSVD
FW_VERSION: RSVD
FW_VERSION: System_SharedMemory_DeviceID
}
}
}
Entry0 --> FW_VERSION: BASE_OFFSET
Entry1 --> Power_Mgmt_A: BASE_OFFSET
Entry10 --> Status_A: BASE_OFFSET
Entry11 --> Status_B: BASE_OFFSET
Config1 --> Data_Discovery_Table_Memory: OFFSET = 0x4000h
Config2 --> Data_Discovery_Table_PowerBase: OFFSET = 0x4100h
@enduml
